<h2 class="ttl">¡Hola, Bastian!</h2>

<div class="grid">
  <div class="card">
    <h3>Práctica Profesional en Curso</h3>
    <p>Etapas: Inicio → Entrega → Evaluación</p>
  </div>

  <!-- Trabajo de Título en Curso -->
  <div class="tema-asignado" aria-live="polite">
    <p class="muted" *ngIf="temaAsignadoCargando()">Cargando información de tu grupo…</p>
    <div class="alert error" *ngIf="temaAsignadoError()">{{ temaAsignadoError() }}</div>

    <ng-container *ngIf="!temaAsignadoCargando()">
      <section class="tema-asignado-card" *ngIf="temaAsignado() as tema; else sinTemaAsignado">
        <div class="tema-asignado-head">
          <div>
            <h3 class="section-title" style="margin-top: 0">Trabajo de Título en Curso</h3>
            <p class="muted tema-asignado-carrera" *ngIf="tema.carrera">{{ tema.carrera }}</p>
          </div>
          <div class="chips meta">
            <span class="chip ghost">Cupos ocupados: {{ tema.inscripcionesActivas.length }} / {{ tema.cupos }}</span>
            <span class="chip">Disponibles: {{ tema.cuposDisponibles }}</span>
          </div>
        </div>

        <h4 class="tema-asignado-titulo">{{ tema.titulo }}</h4>
        <p class="tema-asignado-descripcion">{{ tema.descripcion }}</p>

        <div class="tema-asignado-profesor">
          <span class="tema-asignado-profesor-label">Profesor guía:</span>
          <ng-container *ngIf="profesorAsignado() as profesor; else profesorPorAsignar">
            <span class="tema-asignado-profesor-nombre">{{ profesor.nombre }}</span>
            <span class="tema-asignado-profesor-extra" *ngIf="profesor.carrera"> · {{ profesor.carrera }}</span>
          </ng-container>
        </div>

        <ng-template #profesorPorAsignar>
          <span class="tema-asignado-profesor-nombre">Por asignar</span>
        </ng-template>

        <div class="tema-asignado-integrantes">
          <h5>Integrantes del grupo</h5>
          <ng-container *ngIf="temaAsignadoIntegrantes().length; else sinIntegrantes">
            <ul>
              <li *ngFor="let integrante of temaAsignadoIntegrantes()">
                <strong>{{ integrante.nombre }}</strong>
                <span *ngIf="integrante.correo"> · {{ integrante.correo }}</span>
              </li>
            </ul>
          </ng-container>
          <ng-template #sinIntegrantes>
            <p class="muted" style="margin: 0">Aún no hay compañeros registrados.</p>
          </ng-template>
        </div>

        <div class="tema-asignado-actions">
          <a class="btn light sm" routerLink="/alumno/temas" *ngIf="puedeGestionarCupos()">Gestionar cupos del grupo</a>
          <a class="btn link" routerLink="/alumno/temas">Ver detalle del tema</a>
        </div>
      </section>
    </ng-container>

    <ng-template #sinTemaAsignado>
      <div class="alert info">
        Aún no tienes un tema asignado en Trabajo de Título I. Revisa los <a routerLink="/alumno/temas">temas disponibles</a>
        para postular.
      </div>
    </ng-template>
  </div>

  <div class="card">
    <h3>Retroalimentación</h3>
    <p>Buena redacción y análisis, sigue así.</p>
  </div>

  <div class="card">
    <h3>Próxima Reunión</h3>
    <p>30 de Abril, 11:00</p>
  </div>

</div>