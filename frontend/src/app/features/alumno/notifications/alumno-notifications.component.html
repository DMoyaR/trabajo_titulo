<h2 class="ttl">Notificaciones</h2>

<div class="panel">
  <p class="muted" *ngIf="cargando()">Cargando notificaciones...</p>
  <div class="err" *ngIf="!cargando() && error()">{{ error() }}</div>

  <ng-container *ngIf="!cargando() && !error()">
    <div class="acciones" *ngIf="notificaciones().length">
      <span class="contador" [class.oculto]="!totalNoLeidas()">
        No leídas: {{ totalNoLeidas() }}
      </span>
      <button type="button" class="btn" (click)="marcarTodas()" [disabled]="!totalNoLeidas()">
        Marcar todas como leídas
      </button>
    </div>

<p class="muted" *ngIf="!notificaciones().length">No tienes notificaciones registradas.</p>

    <ul class="list" *ngIf="notificaciones().length">
      <li *ngFor="let n of notificaciones()" [class.leida]="n.leida">
        <span class="ic">{{ iconoPara(n.tipo) }}</span>
        <div class="txt">
          <div class="msg">{{ n.titulo }}</div>
          <p>{{ n.mensaje }}</p>
          <small>{{ n.createdAt | date:'dd MMM yyyy HH:mm' }}</small>
        </div>
        <button type="button" class="mini" *ngIf="!n.leida" (click)="marcarNotificacion(n)">
          Marcar como leída
        </button>
        <span class="mini muted" *ngIf="n.leida">Leída</span>
      </li>
    </ul>
  </ng-container>
</div>