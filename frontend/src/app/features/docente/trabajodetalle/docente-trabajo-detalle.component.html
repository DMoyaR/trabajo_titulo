<div class="dashboard">
  <!-- Sidebar -->
  <aside class="sidebar" [ngClass]="{'open': menuOpen, 'closed': !menuOpen}">
    <div class="logo-container" (click)="menuOpen ? null : toggleMenu()">
      <img src="assets/utem.png" alt="Logo UTEM" class="logo-image" />
      <h3 class="logo-title" [class.hidden]="!menuOpen">PROCESO DE TITULACIÃ“N</h3>
    </div>

    <div class="menu-toggle" (click)="toggleMenu()" [attr.aria-label]="menuOpen ? 'Cerrar menÃº' : 'Abrir menÃº'">
      <span class="toggle-icon" [class.rotated]="!menuOpen">â˜°</span>
    </div>

    <nav class="navigation">
      <ul>
        <li class="nav-item" (click)="navigateTo('notificaciones')">
          <img src="assets/Notificaciones.png" alt="Notificaciones" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Notificaciones</span>
        </li>
        <li class="nav-item" (click)="navigateTo('bandeja')">
          <img src="assets/Bandeja_entrada.png" alt="Bandeja de entrada" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Bandeja de Entrada</span>
        </li>
        <li class="nav-item" (click)="navigateTo('inicio')">
          <img src="assets/Inicio.png" alt="Inicio" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Inicio</span>
        </li>
        <li class="nav-item active" (click)="navigateTo('procesos')">
          <img src="assets/Procesos.png" alt="Procesos" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Trabajo de Titulo</span>
        </li>
        <li class="nav-item" (click)="navigateTo('evaluaciones')">
          <img src="assets/Evaluaciones.png" alt="Evaluaciones" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Evaluaciones</span>
        </li>
        <li class="nav-item" (click)="navigateTo('reportes')">
          <img src="assets/Calendario.png" alt="Reportes" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Calendario</span>
        </li>
        <li class="nav-item" (click)="navigateTo('perfil')">
          <img src="assets/Perfil.png" alt="Perfil" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Perfil</span>
        </li>
        <li class="nav-item logout" (click)="logout()">
          <img src="assets/Cerrar_Sesion.png" alt="Cerrar sesiÃ³n" class="menu-icon" />
          <span class="label" [class.hidden]="!menuOpen">Cerrar SesiÃ³n</span>
        </li>
      </ul>
    </nav>
  </aside>

  <!-- Contenido principal -->
  <main class="content">
    <h2 class="ttl">Trabajo de TÃ­tulo â€” Grupo 3</h2>

    <div class="grid">
      <div class="card">
        <h3>Indicadores de Avance</h3>
        <ul class="list">
          <li *ngFor="let i of indicadores()">
            <b>{{i.estudiante}}</b>
            <div class="prog"><div class="bar" [style.width.%]="i.avance"></div></div>
            <small [class.ok]="i.estado==='ok'" [class.warn]="i.estado!=='ok'">{{i.estado}}</small>
          </li>
        </ul>
      </div>

      <div class="card">
        <h3>Repositorio de Documentos Oficiales</h3>
        <ul class="files">
          <li *ngFor="let d of repo()">
            <span>ðŸ“„ {{d.nombre}}</span><small>{{d.fecha}}</small>
            <button class="btn sm">Descargar</button>
          </li>
        </ul>
        <button class="btn" (click)="showUpload.set(true)">Revisar entregas</button>
      </div>
    </div>

    <docente-upload-dialog *ngIf="showUpload()" (close)="showUpload.set(false)" (confirm)="showUpload.set(false)"></docente-upload-dialog>
  </main>
</div>
