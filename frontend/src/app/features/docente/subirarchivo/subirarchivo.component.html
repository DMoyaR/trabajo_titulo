<div class="container" [ngClass]="variant">
  <!-- T√≠tulo del tema -->
  <div class="titulo-section">
    <label class="titulo-label">T√≠tulo del tema</label>
    <input
      type="text"
      class="form-title-input"
      placeholder="T√≠tulo del tema"
      [ngModel]="tituloTema()"
      (ngModelChange)="tituloTema.set($event)"
    />
  </div>

  <!-- Men√∫ superior del editor -->
  <div class="editor-menu">
    <div class="menu-items">
      <span class="menu-item">Editar</span>
      <span class="menu-item">Ver</span>
      <span class="menu-item">Insertar</span>
      <span class="menu-item" (click)="toggleMenuFormato()" style="position: relative;">
        Formato
        <!-- Men√∫ desplegable de Formato -->
        <div class="formato-menu" *ngIf="mostrarMenuFormato()" (click)="$event.stopPropagation()">
          <div class="formato-item" (click)="aplicarFormato('bold'); cerrarMenuFormato()">
            <strong>B</strong> Negrita
          </div>
          <div class="formato-item" (click)="aplicarFormato('italic'); cerrarMenuFormato()">
            <em>I</em> Cursiva
          </div>
          <div class="formato-item" (click)="aplicarFormato('underline'); cerrarMenuFormato()">
            <u>U</u> Subrayado
          </div>
          <div class="formato-separator"></div>
          <div class="formato-item">
            Comunicaci√≥n verbal <span class="formato-submenu-icon">‚ñ∂</span>
          </div>
          <div class="formato-item">
            Comunicaci√≥n no verbal <span class="formato-submenu-icon">‚ñ∂</span>
          </div>
          <div class="formato-item">
            Comunicaci√≥n gr√°fica <span class="formato-submenu-icon">‚ñ∂</span>
          </div>
          <div class="formato-separator"></div>
          <div class="formato-item">
            Super√≠ndice
          </div>
          <div class="formato-item">
            Sub√≠ndice
          </div>
          <div class="formato-separator"></div>
          <div class="formato-item">
            C√≥digo
          </div>
          <div class="formato-separator"></div>
          <div class="formato-item">
            Borrar formato
          </div>
          <div class="formato-separator"></div>
          <div class="formato-item">
            Alinear <span class="formato-submenu-icon">‚ñ∂</span>
          </div>
          <div class="formato-item">
            Direcci√≥n/alineaci√≥n <span class="formato-submenu-icon">‚ñ∂</span>
          </div>
        </div>
      </span>
      <span class="menu-item">Herramientas</span>
      <span class="menu-item">Tabla</span>
    </div>
  </div>

  <!-- Editor de Texto Enriquecido -->
  <div class="editor-section">
    <!-- Toolbar -->
    <div class="editor-toolbar">
      <!-- Tama√±o y Fuente -->
      <div class="toolbar-group">
        <select class="toolbar-select" [value]="fontSize()" (change)="cambiarTamanoFuente($event)">
          <option value="8pt">8pt</option>
          <option value="10pt">10pt</option>
          <option value="12pt" selected>12pt</option>
          <option value="14pt">14pt</option>
          <option value="18pt">18pt</option>
          <option value="24pt">24pt</option>
          <option value="36pt">36pt</option>
        </select>
        
        <select class="toolbar-select" [value]="fontFamily()" (change)="cambiarFuenteFamilia($event)">
          <option value="P√°rrafo" selected>P√°rrafo</option>
          <option value="Arial">Arial</option>
          <option value="Times New Roman">Times New Roman</option>
          <option value="Courier New">Courier New</option>
          <option value="Georgia">Georgia</option>
        </select>
      </div>

      <!-- Formato de texto -->
      <div class="toolbar-group">
        <button class="toolbar-btn" (click)="aplicarFormato('bold')" title="Negrita">
          <strong>B</strong>
        </button>
        <button class="toolbar-btn" (click)="aplicarFormato('italic')" title="Cursiva">
          <em>I</em>
        </button>
        <button class="toolbar-btn" (click)="aplicarFormato('underline')" title="Subrayado">
          <u>U</u>
        </button>
      </div>

      <!-- Color -->
      <div class="toolbar-group">
        <button class="toolbar-btn" title="Color de texto">A</button>
        <button class="toolbar-btn" title="Color de fondo">üé®</button>
      </div>

      <!-- Insertar -->
      <div class="toolbar-group">
        <button class="toolbar-btn" (click)="insertarEnlace()" title="Insertar enlace">üîó</button>
        <button class="toolbar-btn" (click)="insertarImagen()" title="Insertar imagen">üñºÔ∏è</button>
        <button class="toolbar-btn" title="Insertar emoji">üòä</button>
        <button class="toolbar-btn" title="Insertar">+</button>
      </div>

      <!-- Alineaci√≥n -->
      <div class="toolbar-group">
        <button class="toolbar-btn" (click)="aplicarFormato('justifyLeft')" title="Izquierda">‚ò∞</button>
        <button class="toolbar-btn" (click)="aplicarFormato('justifyCenter')" title="Centro">‚ò∞</button>
        <button class="toolbar-btn" (click)="aplicarFormato('justifyRight')" title="Derecha">‚ò∞</button>
        <button class="toolbar-btn" (click)="aplicarFormato('justifyFull')" title="Justificar">‚ò∞</button>
      </div>

      <!-- Listas -->
      <div class="toolbar-group">
        <button class="toolbar-btn" (click)="aplicarFormato('insertUnorderedList')" title="Lista">‚Ä¢</button>
        <button class="toolbar-btn" (click)="aplicarFormato('insertOrderedList')" title="Lista numerada">1.</button>
      </div>

      <!-- Otros -->
      <div class="toolbar-group">
        <button class="toolbar-btn" title="M√°s opciones">‚ãÆ</button>
      </div>
    </div>

    <!-- √Årea de contenido editable -->
    <div
      #editorContent
      class="editor-content"
      contenteditable="true"
      (input)="actualizarContadores($event)"
      data-placeholder=""
    ></div>

    <!-- Footer del editor -->
    <div class="editor-footer">
      <div>
        <span>p</span>
      </div>
      <div class="editor-actions">
        <button class="icon-btn" title="Vista previa">üëÅ</button>
        <button class="icon-btn" title="Informaci√≥n">‚Ñπ</button>
        <span>{{ palabras() }} palabras</span>
        <button class="icon-btn" title="C√≥digo">< /></button>
        <button class="icon-btn" title="Expandir">‚§¢</button>
        <button class="icon-btn" title="M√°s">‚ò∞</button>
      </div>
    </div>
  </div>

  <!-- Secci√≥n Publicar en - ELIMINADA -->

  <!-- Archivo adjunto -->
  <div class="archivo-section">
    <label class="archivo-label">Archivo adjunto</label>
    <div class="archivo-buttons">
      <label class="btn-archivo">
        Seleccionar archivo
        <input 
          type="file" 
          class="file-input"
          (change)="seleccionarArchivo($event)"
        />
      </label>
      <span class="btn-archivo">Sin archivos seleccionados</span>
    </div>
  </div>

  <!-- Secci√≥n de Opciones -->
  <div class="opciones-section">
    <h3 class="opciones-title">Opciones</h3>
    <div class="opciones-list">
      <!-- Opci√≥n 1 -->
      <div class="opcion-item">
        <input 
          type="checkbox" 
          class="checkbox-custom" 
          [checked]="opciones().atrasarPublicacion"
          (change)="toggleOpcion('atrasarPublicacion')"
        />
        <label class="opcion-label" (click)="toggleOpcion('atrasarPublicacion')">
          Atrasar la publicaci√≥n
        </label>
      </div>

      <!-- Fecha y hora si est√° activado -->
      <div class="fecha-hora-section" *ngIf="opciones().atrasarPublicacion">
        <div class="fecha-hora-label">Seleccionar fecha y hora de publicaci√≥n:</div>
        <div class="fecha-hora-inputs">
          <div class="input-group">
            <label>Fecha</label>
            <input 
              type="date" 
              [value]="opciones().fechaPublicacion"
              (change)="actualizarFecha($event)"
            />
          </div>
          <div class="input-group">
            <label>Hora</label>
            <input 
              type="time" 
              [value]="opciones().horaPublicacion"
              (change)="actualizarHora($event)"
            />
          </div>
        </div>
      </div>

      <!-- Opci√≥n 2 -->
      <div class="opcion-item">
        <input 
          type="checkbox" 
          class="checkbox-custom" 
          [checked]="opciones().permitirComentarios"
          (change)="toggleOpcion('permitirComentarios')"
        />
        <label class="opcion-label" (click)="toggleOpcion('permitirComentarios')">
          Permitir que los usuarios comenten
        </label>
      </div>

      <!-- Sub-opci√≥n -->
      <div class="opcion-sublabel" *ngIf="opciones().permitirComentarios">
        <input 
          type="checkbox" 
          [checked]="opciones().publicarAntesRespuestas"
          (change)="toggleOpcion('publicarAntesRespuestas')"
        />
        <span>Los usuarios deben publicar antes de ver las respuestas</span>
      </div>

      <!-- Opci√≥n 3 -->
      <div class="opcion-item">
        <input 
          type="checkbox" 
          class="checkbox-custom" 
          [checked]="opciones().activarFeedPodcast"
          (change)="toggleOpcion('activarFeedPodcast')"
        />
        <label class="opcion-label" (click)="toggleOpcion('activarFeedPodcast')">
          Activar el feed de podcast
        </label>
      </div>

      <!-- Opci√≥n 4 -->
      <div class="opcion-item">
        <input 
          type="checkbox" 
          class="checkbox-custom" 
          [checked]="opciones().permitirMeGusta"
          (change)="toggleOpcion('permitirMeGusta')"
        />
        <label class="opcion-label" (click)="toggleOpcion('permitirMeGusta')">
          Permitir darle clic a "me gusta"
        </label>
      </div>
    </div>
  </div>

  <!-- Botones de acci√≥n -->
  <div class="actions-footer">
    <button class="btn-cancelar" (click)="onCancelar()">Cancelar</button>
    <button class="btn-publicar" (click)="onPublicar()">Publicar</button>
  </div>
</div>