<section class="notifications">
  <h2 class="ttl">Solicitudes de estudiantes</h2>

  <p class="muted" *ngIf="cargando()">Cargando solicitudes...</p>
  <div class="alert error" *ngIf="error()">{{ error() }}</div>

  <div class="acciones" *ngIf="!cargando() && !error() && solicitudes().length">
    <span class="contador" *ngIf="totalPendientes()">{{ totalPendientes() }} pendiente{{ totalPendientes() === 1 ? '' : 's' }}</span>
    <button class="pill sm" type="button" (click)="marcarTodas()">Marcar todas como revisadas</button>
  </div>

  <p class="muted" *ngIf="!cargando() && !error() && !solicitudes().length">
    No hay solicitudes pendientes de tus estudiantes.
  </p>

  <ul class="list" *ngIf="!cargando() && !error() && solicitudes().length">
    <li class="item" *ngFor="let notificacion of solicitudes()" [class.leida]="notificacion.leida">
      <div class="item-header">
        <strong>{{ notificacion.titulo }}</strong>
        <span class="chip" *ngIf="!notificacion.leida">Pendiente</span>
      </div>
      <p>{{ notificacion.mensaje }}</p>
      <small class="muted">{{ formatoFecha(notificacion.createdAt) }}</small>
      <button
        class="link"
        type="button"
        *ngIf="!notificacion.leida"
        (click)="marcarComoLeida(notificacion)"
      >
        Marcar como revisada
      </button>
    </li>
  </ul>
</section>